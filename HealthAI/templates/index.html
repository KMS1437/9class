<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Health Risk Check</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="container">
    <h1>üß† Health Risk Check</h1>
    <p class="subtitle">–ë—ã—Å—Ç—Ä–∞—è –æ—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π</p>

    <form id="healthForm">
        <div class="grid">
            <input name="age" placeholder="–í–æ–∑—Ä–∞—Å—Ç" required>
            <select name="gender">
                <option value="0">–ú—É–∂—á–∏–Ω–∞</option>
                <option value="1">–ñ–µ–Ω—â–∏–Ω–∞</option>
            </select>
            <input name="bmi" placeholder="–ò–ú–¢">
            <input name="bp_sys" placeholder="–î–∞–≤–ª–µ–Ω–∏–µ (—Å–∏—Å—Ç.)">
            <input name="bp_dia" placeholder="–î–∞–≤–ª–µ–Ω–∏–µ (–¥–∏–∞—Å—Ç.)">
            <input name="cholesterol" placeholder="–•–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω">
            <input name="glucose" placeholder="–ì–ª—é–∫–æ–∑–∞">
            <input name="smoking" placeholder="–°—Ç–∞–∂ –∫—É—Ä–µ–Ω–∏—è">
            <input name="alcohol" placeholder="–ê–ª–∫–æ–≥–æ–ª—å (0‚Äì10)">
            <input name="activity" placeholder="–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (0‚Äì10)">
            <input name="sleep" placeholder="–°–æ–Ω (—á)">
            <input name="stress" placeholder="–°—Ç—Ä–µ—Å—Å (0‚Äì10)">
            <select name="family_diabetes">
                <option value="0">–î–∏–∞–±–µ—Ç –≤ —Å–µ–º—å–µ ‚Äî –Ω–µ—Ç</option>
                <option value="1">–î–∏–∞–±–µ—Ç –≤ —Å–µ–º—å–µ ‚Äî –¥–∞</option>
            </select>
            <select name="family_heart">
                <option value="0">–°–µ—Ä–¥—Ü–µ ‚Äî –Ω–µ—Ç</option>
                <option value="1">–°–µ—Ä–¥—Ü–µ ‚Äî –¥–∞</option>
            </select>
        </div>

        <button>–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ä–∏—Å–∫–∏</button>
    </form>

    <div id="results"></div>

    <p class="subtitle" style="margin-top:20px">
        <a href="/login">–í–æ–π—Ç–∏</a> ¬∑ <a href="/register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
    </p>
</div>

<script>
document.getElementById("healthForm").onsubmit = async e => {
    e.preventDefault();

    const data = Object.fromEntries(new FormData(e.target).entries());

    const res = await fetch("/predict", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify(data)
    });

    const results = await res.json();
    const box = document.getElementById("results");

    box.innerHTML = "<h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>";

    results.forEach(r => {
        box.innerHTML += `
            <div class="result ${r.risk}">
                <span>${r.name}</span>
                <strong>${r.probability}%</strong>
            </div>
        `;
    });
};
</script>

</body>
</html>
